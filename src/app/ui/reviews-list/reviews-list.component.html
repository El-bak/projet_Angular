<section class="reviews-section">
  <h2>ğŸ“ Avis clients</h2>

  <div class="rating-filter">
    <span>Filtrer :</span>
    <button
      *ngFor="let r of [5,4,3,2,1]"
      mat-stroked-button
      [disabled]="minRating === r"
      (click)="setMinRating(r)">
      {{ r }}â˜… et +
    </button>
  </div>

  <div class="rating-filter">
    <span>Trier :</span>
    <button
      mat-stroked-button
      [disabled]="sortMode === 'date'"
      (click)="setSort('date')">
      Plus rÃ©cents
    </button>

    <button
      mat-stroked-button
      [disabled]="sortMode === 'rating'"
      (click)="setSort('rating')">
      Mieux notÃ©s
    </button>
  </div>

  <!-- SKELETON LOADER -->
  <div *ngIf="loading" class="skeleton-wrapper">
    <div class="review-skeleton" *ngFor="let _ of [1,2,3]"></div>
  </div>

  <!-- CONTENU -->
  <ng-container *ngIf="!loading">

    <p *ngIf="!reviews || reviews.length === 0">
      Aucun avis pour le moment.
    </p>

    <mat-card
      *ngFor="let review of filteredReviews; trackBy: trackById"
      class="review-card"
    >
      <mat-card-title>
        {{ review.user.username }}
      </mat-card-title>

      <mat-card-subtitle>
        {{ review.createdAt | date:'mediumDate' }}
      </mat-card-subtitle>

      <mat-card-content>
        <div class="stars">
          <mat-icon *ngFor="let s of [1,2,3,4,5]" color="warn">
            {{ s <= review.rating ? 'star' : 'star_border' }}
          </mat-icon>
        </div>

        <p>{{ review.comment }}</p>
      </mat-card-content>
    </mat-card>

  </ng-container>
</section>
